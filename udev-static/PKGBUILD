# Maintainer: yaroslav <proninyaroslav@mail.ru>
# Contributor: jdarch <jda -dot- cloud -plus- archlinux -at- gmail -dot- com>

pkgname=('libudev0')
pkgname=('udev-static')
pkgver=182
pkgver=174
pkgrel=4
pkgdesc="Dynamic library to access udev device information, legacy libudev.so.0."
url="https://www.kernel.org/pub/linux/utils/kernel/hotplug/udev/udev.html"
arch=('x86_64' 'i686')
license=('GPL')
makedepends=('gperf')
source=("https://www.kernel.org/pub/linux/utils/kernel/hotplug/udev-182.tar.xz")
source=("https://www.kernel.org/pub/linux/utils/kernel/hotplug/udev-174.tar.bz2")
sha256sums=('SKIP')

prepare() {
   cd "${srcdir}/udev-${pkgver}"
   autoreconf -vfi
}

build() {
  cd "${srcdir}/udev-${pkgver}"
  ./configure \
--enable-static  \
    --disable-introspection \
    --sysconfdir=/etc \
    --bindir=/usr/bin \
    --sbindir=/usr/bin \
    --libdir=/usr/lib \
    --disable-gudev \
    --libexecdir=/usr/lib/udev
#    --libexecdir=/usr/lib
#    --disable-gudev \
#  make LIBS="-lrt" LDFLAGS="-all-static"
  make  LDFLAGS="-all-static"
}

package() {
  cd "${srcdir}/udev-${pkgver}"
#  cd "${srcdir}/${_gitname}"
  make DESTDIR="${pkgdir}" install

 # install -Dm755 .libs/libudev.so.0.13.1 "${pkgdir}/usr/lib/libudev.so.0.13.1"
 # install -Dm644 COPYING "${pkgdir}/usr/share/licenses/${pkgname}/COPYING"
#  ln -s "/usr/lib/libudev.so.0.13.1" "${pkgdir}/usr/lib/libudev.so.0"
}