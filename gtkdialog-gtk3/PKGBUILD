# Maintainer: sfs <sfslinux@gmail.com>

pkgname=gtkdialog-gtk3
_pkgname=gtkdialog
pkgver=514
pkgrel=7
pkgdesc="Gtkdialog is a small utility for fast and easy GUI building (SVN)"
arch=('i686' 'x86_64' 'arm')
url="https://github.com/01micko/gtkdialog"
license=('GPL')
depends=( 'gtk3')
#makedepends=('subversion' 'automake' 'bison' 'flex')
makedepends=('git' )
optdepends=('gtkdialog-examples: sample projects - pfeme, pfontview, playmusic')
provides=('gtkdialog')
conflicts=('gtkdialog')
install=gtkdialog.install

source=('git+'${url}'')
sha256sums=('SKIP')

#_svntrunk=http://gtkdialog.googlecode.com/svn/trunk
#_svntrunk=https://github.com/oshazard/gtkdialog
#_svnmod=gtkdialog

build() {
#  cd "$srcdir"
#  svn checkout $_svntrunk --config-dir ./ $_svnmod
#  msg "SVN checkout done or server timeout"
#  cd $_svnmod/trunk
  cd "${srcdir}/${_pkgname}"
  msg "Starting configure..."
  ./autogen.sh --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info \
    --enable-gtk3

  msg "Running make..."
  make
}

package() {
#  cd $_svnmod/trunk
  cd "${srcdir}/${_pkgname}"
  make DESTDIR=$pkgdir UPDATE_ICON_CACHE=true install
  rm -f $pkgdir/usr/share/info/dir
  mkdir -p $pkgdir/usr/share/doc/$pkgname
  cp -a examples $pkgdir/usr/share/doc/$pkgname/examples
}

